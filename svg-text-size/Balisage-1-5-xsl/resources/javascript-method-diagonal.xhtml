<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>JavaScript method horizontal</title>
        <style type="text/css">
            svg {
                display: block;
                overflow: visible
            }
            body {
                display: flex;
                flex-direction: row;
                column-gap: 1em;
            }
            section {
                display: flex;
                flex-direction: column;
                row-gap: 1em;
            }
            div {
                padding: .5em
            }</style>
        <script type="text/javascript">
            <![CDATA[
            window.addEventListener('DOMContentLoaded', init, false);
            function init() {
                const divs = document.querySelectorAll('div');
                for (i = 0; i < divs.length; i++) {
                    bb = divs[i].querySelector('g').getBBox();
                    console.log(bb);
                    divs[i].querySelector('svg').setAttribute('height', bb.height);
                    divs[i].querySelector('svg').setAttribute('width', bb.width);
                }
                // subtract from text not rotated around origin
                // Overflow visible or shift g to accommodate
            }//]]></script>
    </head>
    <body>
        <section>
            <div>
                <svg xmlns="http://www.w3.org/2000/svg">
                    <g transform="translate(70, 205)">
                        <text x="-32" y="2" font-size="16" font-family="Times New Roman"
                            text-anchor="middle">0</text>
                        <line x1="0" x2="-16" y1="0" y2="0" stroke="black"/>
                        <line x1="0" x2="252" y1="0" y2="0" stroke="black" opacity=".5"/>
                        <text x="-32" y="42" font-size="16" font-family="Times New Roman"
                            text-anchor="middle">4</text>
                        <line x1="0" x2="-16" y1="40" y2="40" stroke="black"/>
                        <line x1="0" x2="252" y1="40" y2="40" stroke="black" opacity=".5"/>
                        <text x="-32" y="82" font-size="16" font-family="Times New Roman"
                            text-anchor="middle">8</text>
                        <line x1="0" x2="-16" y1="80" y2="80" stroke="black"/>
                        <line x1="0" x2="252" y1="80" y2="80" stroke="black" opacity=".5"/>
                        <text x="-32" y="122" font-size="16" font-family="Times New Roman"
                            text-anchor="middle">12</text>
                        <line x1="0" x2="-16" y1="120" y2="120" stroke="black"/>
                        <line x1="0" x2="252" y1="120" y2="120" stroke="black" opacity=".5"/>
                        <text x="-32" y="162" font-size="16" font-family="Times New Roman"
                            text-anchor="middle">16</text>
                        <line x1="0" x2="-16" y1="160" y2="160" stroke="black"/>
                        <line x1="0" x2="252" y1="160" y2="160" stroke="black" opacity=".5"/>
                        <text x="-32" y="-158" font-size="16" font-family="Times New Roman"
                            text-anchor="middle">16</text>
                        <line x1="-16" x2="0" y1="-160" y2="-160" stroke="black"/>
                        <line x1="0" x2="252" y1="-160" y2="-160" stroke="black" opacity=".5"/>
                        <text x="-32" y="-118" font-size="16" font-family="Times New Roman"
                            text-anchor="middle">12</text>
                        <line x1="-16" x2="0" y1="-120" y2="-120" stroke="black"/>
                        <line x1="0" x2="252" y1="-120" y2="-120" stroke="black" opacity=".5"/>
                        <text x="-32" y="-78" font-size="16" font-family="Times New Roman"
                            text-anchor="middle">8</text>
                        <line x1="-16" x2="0" y1="-80" y2="-80" stroke="black"/>
                        <line x1="0" x2="252" y1="-80" y2="-80" stroke="black" opacity=".5"/>
                        <text x="-32" y="-38" font-size="16" font-family="Times New Roman"
                            text-anchor="middle">4</text>
                        <line x1="-16" x2="0" y1="-40" y2="-40" stroke="black"/>
                        <line x1="0" x2="252" y1="-40" y2="-40" stroke="black" opacity=".5"/>
                        <line x1="18" x2="18" y1="-160" y2="160" stroke="black" opacity=".5"
                            stroke-dasharray="5,5"/>
                        <rect x="9" width="18" y="-0" height="0" fill="#88c5db" stroke-width=".5"
                            stroke="black"/>
                        <rect x="9" width="18" y="0" height="0" fill="#f0d946" stroke-width=".5"
                            stroke="black"/>
                        <text x="18" y="168" text-anchor="start" font-size="16"
                            font-family="Times New Roman" writing-mode="tb"
                            transform="rotate(-30, 18, 168)">Nuenen</text>
                        <line x1="45" x2="45" y1="-160" y2="160" stroke="black" opacity=".5"
                            stroke-dasharray="5,5"/>
                        <rect x="36" width="18" y="-0" height="0" fill="#88c5db" stroke-width=".5"
                            stroke="black"/>
                        <rect x="36" width="18" y="0" height="20" fill="#f0d946" stroke-width=".5"
                            stroke="black"/>
                        <text x="45" y="168" text-anchor="start" font-size="16"
                            font-family="Times New Roman" writing-mode="tb"
                            transform="rotate(-30, 45, 168)">The Hague</text>
                        <line x1="72" x2="72" y1="-160" y2="160" stroke="black" opacity=".5"
                            stroke-dasharray="5,5"/>
                        <rect x="63" width="18" y="-0" height="0" fill="#88c5db" stroke-width=".5"
                            stroke="black"/>
                        <rect x="63" width="18" y="0" height="60" fill="#f0d946" stroke-width=".5"
                            stroke="black"/>
                        <text x="72" y="168" text-anchor="start" font-size="16"
                            font-family="Times New Roman" writing-mode="tb"
                            transform="rotate(-30, 72, 168)">Etten</text>
                        <line x1="99" x2="99" y1="-160" y2="160" stroke="black" opacity=".5"
                            stroke-dasharray="5,5"/>
                        <rect x="90" width="18" y="-60" height="60" fill="#88c5db" stroke-width=".5"
                            stroke="black"/>
                        <rect x="90" width="18" y="0" height="30" fill="#f0d946" stroke-width=".5"
                            stroke="black"/>
                        <text x="99" y="168" text-anchor="start" font-size="16"
                            font-family="Times New Roman" writing-mode="tb"
                            transform="rotate(-30, 99, 168)">Nieuw-Amsterdam</text>
                        <line x1="126" x2="126" y1="-160" y2="160" stroke="black" opacity=".5"
                            stroke-dasharray="5,5"/>
                        <rect x="117" width="18" y="-0" height="0" fill="#88c5db" stroke-width=".5"
                            stroke="black"/>
                        <rect x="117" width="18" y="0" height="110" fill="#f0d946" stroke-width=".5"
                            stroke="black"/>
                        <text x="126" y="168" text-anchor="start" font-size="16"
                            font-family="Times New Roman" writing-mode="tb"
                            transform="rotate(-30, 126, 168)">Cuesmes</text>
                        <line x1="153" x2="153" y1="-160" y2="160" stroke="black" opacity=".5"
                            stroke-dasharray="5,5"/>
                        <rect x="144" width="18" y="-60" height="60" fill="#88c5db"
                            stroke-width=".5" stroke="black"/>
                        <rect x="144" width="18" y="0" height="130" fill="#f0d946" stroke-width=".5"
                            stroke="black"/>
                        <text x="153" y="168" text-anchor="start" font-size="16"
                            font-family="Times New Roman" writing-mode="tb"
                            transform="rotate(-30, 153, 168)">Hoogeveen</text>
                        <line x1="180" x2="180" y1="-160" y2="160" stroke="black" opacity=".5"
                            stroke-dasharray="5,5"/>
                        <rect x="171" width="18" y="-0" height="0" fill="#88c5db" stroke-width=".5"
                            stroke="black"/>
                        <rect x="171" width="18" y="0" height="0" fill="#f0d946" stroke-width=".5"
                            stroke="black"/>
                        <text x="180" y="168" text-anchor="start" font-size="16"
                            font-family="Times New Roman" writing-mode="tb"
                            transform="rotate(-30, 180, 168)">Brussels</text>
                        <line x1="207" x2="207" y1="-160" y2="160" stroke="black" opacity=".5"
                            stroke-dasharray="5,5"/>
                        <rect x="198" width="18" y="-20" height="20" fill="#88c5db"
                            stroke-width=".5" stroke="black"/>
                        <rect x="198" width="18" y="0" height="130" fill="#f0d946" stroke-width=".5"
                            stroke="black"/>
                        <text x="207" y="168" text-anchor="start" font-size="16"
                            font-family="Times New Roman" writing-mode="tb"
                            transform="rotate(-30, 207, 168)">Antwerp</text>
                        <line x1="234" x2="234" y1="-160" y2="160" stroke="black" opacity=".5"
                            stroke-dasharray="5,5"/>
                        <rect x="225" width="18" y="-0" height="0" fill="#88c5db" stroke-width=".5"
                            stroke="black"/>
                        <rect x="225" width="18" y="0" height="10" fill="#f0d946" stroke-width=".5"
                            stroke="black"/>
                        <text x="234" y="168" text-anchor="start" font-size="16"
                            font-family="Times New Roman" writing-mode="tb"
                            transform="rotate(-30, 234, 168)">Paris</text>
                        <text x="-64" y="-80" font-size="16" text-anchor="middle"
                            font-family="Times New Roman" font-weight="300" writing-mode="tb">Good
                            Health</text>
                        <text x="-64" y="80" font-size="16" text-anchor="middle"
                            font-family="Times New Roman" font-weight="300" writing-mode="tb">Bad
                            Health</text>
                        <text x="126" y="-185" font-size="16" text-anchor="middle"
                            font-family="Times New Roman" font-weight="300">Mentions of Mental
                            Health/Stress Factors</text>
                        <line x1="0" x2="0" y1="-160" y2="160" stroke="black"/>
                        <line x1="0" x2="252" y1="0" y2="0" stroke="black"/>
                    </g>
                </svg>
            </div>
                <div>
                    <svg xmlns="http://www.w3.org/2000/svg">
                        <g transform="translate(70, 0)">
                            <text x="126" y="0" text-anchor="middle" font-size="16"
                                font-family="Times New Roman">Location at time of writing</text>
                        </g>
                    </svg>
                </div>
        </section>
    </body>
</html>
