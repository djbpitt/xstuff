<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <title>JavaScript method diagonal</title>
      <style type="text/css">
                    svg {
                        display: block;
                        overflow: visible
                    }
                    section {
                        display: flex;
                        flex-direction: column;
                        row-gap: 1em;
                    }
                    </style>
      <script type="text/javascript">
                
                    window.addEventListener('DOMContentLoaded', init, false);
                    function init() {
                        const divs = document.querySelectorAll('div');
                        for (i = 0; i &lt; divs.length; i++) {
                            bb = divs[i].querySelector('g').getBBox();
                            console.log(bb);
                            divs[i].querySelector('svg').setAttribute('height', bb.height);
                            divs[i].querySelector('svg').setAttribute('width', bb.width);
                        }
                        // subtract from text not rotated around origin
                        // Overflow visible or shift g to accommodate
                    }//</script>
   </head>
   <body>
      <section>
         <div>
            <svg xmlns="http://www.w3.org/2000/svg">
               <g transform="translate(48, 198)">
                  <text x="-20"
                        y="2"
                        font-size="16"
                        font-family="Times New Roman"
                        text-anchor="middle">0</text>
                  <line x1="0" x2="-10" y1="0" y2="0" stroke="black"/>
                  <line x1="0"
                        x2="252"
                        y1="0"
                        y2="0"
                        stroke="black"
                        opacity=".5"/>
                  <text x="-20"
                        y="42"
                        font-size="16"
                        font-family="Times New Roman"
                        text-anchor="middle">4</text>
                  <line x1="0" x2="-10" y1="40" y2="40" stroke="black"/>
                  <line x1="0"
                        x2="252"
                        y1="40"
                        y2="40"
                        stroke="black"
                        opacity=".5"/>
                  <text x="-20"
                        y="82"
                        font-size="16"
                        font-family="Times New Roman"
                        text-anchor="middle">8</text>
                  <line x1="0" x2="-10" y1="80" y2="80" stroke="black"/>
                  <line x1="0"
                        x2="252"
                        y1="80"
                        y2="80"
                        stroke="black"
                        opacity=".5"/>
                  <text x="-20"
                        y="122"
                        font-size="16"
                        font-family="Times New Roman"
                        text-anchor="middle">12</text>
                  <line x1="0" x2="-10" y1="120" y2="120" stroke="black"/>
                  <line x1="0"
                        x2="252"
                        y1="120"
                        y2="120"
                        stroke="black"
                        opacity=".5"/>
                  <text x="-20"
                        y="162"
                        font-size="16"
                        font-family="Times New Roman"
                        text-anchor="middle">16</text>
                  <line x1="0" x2="-10" y1="160" y2="160" stroke="black"/>
                  <line x1="0"
                        x2="252"
                        y1="160"
                        y2="160"
                        stroke="black"
                        opacity=".5"/>
                  <text x="-20"
                        y="-158"
                        font-size="16"
                        font-family="Times New Roman"
                        text-anchor="middle">16</text>
                  <line x1="-10" x2="0" y1="-160" y2="-160" stroke="black"/>
                  <line x1="0"
                        x2="252"
                        y1="-160"
                        y2="-160"
                        stroke="black"
                        opacity=".5"/>
                  <text x="-20"
                        y="-118"
                        font-size="16"
                        font-family="Times New Roman"
                        text-anchor="middle">12</text>
                  <line x1="-10" x2="0" y1="-120" y2="-120" stroke="black"/>
                  <line x1="0"
                        x2="252"
                        y1="-120"
                        y2="-120"
                        stroke="black"
                        opacity=".5"/>
                  <text x="-20"
                        y="-78"
                        font-size="16"
                        font-family="Times New Roman"
                        text-anchor="middle">8</text>
                  <line x1="-10" x2="0" y1="-80" y2="-80" stroke="black"/>
                  <line x1="0"
                        x2="252"
                        y1="-80"
                        y2="-80"
                        stroke="black"
                        opacity=".5"/>
                  <text x="-20"
                        y="-38"
                        font-size="16"
                        font-family="Times New Roman"
                        text-anchor="middle">4</text>
                  <line x1="-10" x2="0" y1="-40" y2="-40" stroke="black"/>
                  <line x1="0"
                        x2="252"
                        y1="-40"
                        y2="-40"
                        stroke="black"
                        opacity=".5"/>
                  <line x1="18"
                        x2="18"
                        y1="-160"
                        y2="160"
                        stroke="black"
                        opacity=".5"
                        stroke-dasharray="5,5"/>
                  <rect x="9"
                        width="18"
                        y="-0"
                        height="0"
                        fill="#88c5db"
                        stroke-width=".5"
                        stroke="black"/>
                  <rect x="9"
                        width="18"
                        y="0"
                        height="110"
                        fill="#f0d946"
                        stroke-width=".5"
                        stroke="black"/>
                  <text x="18"
                        y="170"
                        text-anchor="start"
                        font-size="16"
                        font-family="Times New Roman"
                        writing-mode="tb"
                        transform="rotate(-30, 18, 170)">Cuesmes (1880)</text>
                  <line x1="45"
                        x2="45"
                        y1="-160"
                        y2="160"
                        stroke="black"
                        opacity=".5"
                        stroke-dasharray="5,5"/>
                  <rect x="36"
                        width="18"
                        y="-0"
                        height="0"
                        fill="#88c5db"
                        stroke-width=".5"
                        stroke="black"/>
                  <rect x="36"
                        width="18"
                        y="0"
                        height="60"
                        fill="#f0d946"
                        stroke-width=".5"
                        stroke="black"/>
                  <text x="45"
                        y="170"
                        text-anchor="start"
                        font-size="16"
                        font-family="Times New Roman"
                        writing-mode="tb"
                        transform="rotate(-30, 45, 170)">Etten (1881)</text>
                  <line x1="72"
                        x2="72"
                        y1="-160"
                        y2="160"
                        stroke="black"
                        opacity=".5"
                        stroke-dasharray="5,5"/>
                  <rect x="63"
                        width="18"
                        y="-0"
                        height="0"
                        fill="#88c5db"
                        stroke-width=".5"
                        stroke="black"/>
                  <rect x="63"
                        width="18"
                        y="0"
                        height="0"
                        fill="#f0d946"
                        stroke-width=".5"
                        stroke="black"/>
                  <text x="72"
                        y="170"
                        text-anchor="start"
                        font-size="16"
                        font-family="Times New Roman"
                        writing-mode="tb"
                        transform="rotate(-30, 72, 170)">Brussels (1881)</text>
                  <line x1="99"
                        x2="99"
                        y1="-160"
                        y2="160"
                        stroke="black"
                        opacity=".5"
                        stroke-dasharray="5,5"/>
                  <rect x="90"
                        width="18"
                        y="-0"
                        height="0"
                        fill="#88c5db"
                        stroke-width=".5"
                        stroke="black"/>
                  <rect x="90"
                        width="18"
                        y="0"
                        height="20"
                        fill="#f0d946"
                        stroke-width=".5"
                        stroke="black"/>
                  <text x="99"
                        y="170"
                        text-anchor="start"
                        font-size="16"
                        font-family="Times New Roman"
                        writing-mode="tb"
                        transform="rotate(-30, 99, 170)">The Hague (1882)</text>
                  <line x1="126"
                        x2="126"
                        y1="-160"
                        y2="160"
                        stroke="black"
                        opacity=".5"
                        stroke-dasharray="5,5"/>
                  <rect x="117"
                        width="18"
                        y="-60"
                        height="60"
                        fill="#88c5db"
                        stroke-width=".5"
                        stroke="black"/>
                  <rect x="117"
                        width="18"
                        y="0"
                        height="30"
                        fill="#f0d946"
                        stroke-width=".5"
                        stroke="black"/>
                  <text x="126"
                        y="170"
                        text-anchor="start"
                        font-size="16"
                        font-family="Times New Roman"
                        writing-mode="tb"
                        transform="rotate(-30, 126, 170)">Nieuw-Amsterdam (1883)</text>
                  <line x1="153"
                        x2="153"
                        y1="-160"
                        y2="160"
                        stroke="black"
                        opacity=".5"
                        stroke-dasharray="5,5"/>
                  <rect x="144"
                        width="18"
                        y="-60"
                        height="60"
                        fill="#88c5db"
                        stroke-width=".5"
                        stroke="black"/>
                  <rect x="144"
                        width="18"
                        y="0"
                        height="130"
                        fill="#f0d946"
                        stroke-width=".5"
                        stroke="black"/>
                  <text x="153"
                        y="170"
                        text-anchor="start"
                        font-size="16"
                        font-family="Times New Roman"
                        writing-mode="tb"
                        transform="rotate(-30, 153, 170)">Hoogeveen (1883)</text>
                  <line x1="180"
                        x2="180"
                        y1="-160"
                        y2="160"
                        stroke="black"
                        opacity=".5"
                        stroke-dasharray="5,5"/>
                  <rect x="171"
                        width="18"
                        y="-0"
                        height="0"
                        fill="#88c5db"
                        stroke-width=".5"
                        stroke="black"/>
                  <rect x="171"
                        width="18"
                        y="0"
                        height="0"
                        fill="#f0d946"
                        stroke-width=".5"
                        stroke="black"/>
                  <text x="180"
                        y="170"
                        text-anchor="start"
                        font-size="16"
                        font-family="Times New Roman"
                        writing-mode="tb"
                        transform="rotate(-30, 180, 170)">Nuenen (1884)</text>
                  <line x1="207"
                        x2="207"
                        y1="-160"
                        y2="160"
                        stroke="black"
                        opacity=".5"
                        stroke-dasharray="5,5"/>
                  <rect x="198"
                        width="18"
                        y="-20"
                        height="20"
                        fill="#88c5db"
                        stroke-width=".5"
                        stroke="black"/>
                  <rect x="198"
                        width="18"
                        y="0"
                        height="130"
                        fill="#f0d946"
                        stroke-width=".5"
                        stroke="black"/>
                  <text x="207"
                        y="170"
                        text-anchor="start"
                        font-size="16"
                        font-family="Times New Roman"
                        writing-mode="tb"
                        transform="rotate(-30, 207, 170)">Antwerp (1886)</text>
                  <line x1="234"
                        x2="234"
                        y1="-160"
                        y2="160"
                        stroke="black"
                        opacity=".5"
                        stroke-dasharray="5,5"/>
                  <rect x="225"
                        width="18"
                        y="-0"
                        height="0"
                        fill="#88c5db"
                        stroke-width=".5"
                        stroke="black"/>
                  <rect x="225"
                        width="18"
                        y="0"
                        height="10"
                        fill="#f0d946"
                        stroke-width=".5"
                        stroke="black"/>
                  <text x="234"
                        y="170"
                        text-anchor="start"
                        font-size="16"
                        font-family="Times New Roman"
                        writing-mode="tb"
                        transform="rotate(-30, 234, 170)">Paris (1887)</text>
                  <text x="-40"
                        y="-80"
                        font-size="16"
                        text-anchor="middle"
                        font-family="Times New Roman"
                        font-weight="300"
                        writing-mode="tb">Good Health</text>
                  <text x="-40"
                        y="80"
                        font-size="16"
                        text-anchor="middle"
                        font-family="Times New Roman"
                        font-weight="300"
                        writing-mode="tb">Bad Health</text>
                  <text x="126"
                        y="-190"
                        font-size="16"
                        text-anchor="middle"
                        font-family="Times New Roman"
                        font-weight="300">Mentions of Mental Health/Stress Factors</text>
                  <line x1="0" x2="0" y1="-160" y2="160" stroke="black"/>
                  <line x1="0" x2="252" y1="0" y2="0" stroke="black"/>
               </g>
            </svg>
         </div>
         <div>
            <svg xmlns="http://www.w3.org/2000/svg">
               <g transform="translate(48, 0)">
                  <text x="126"
                        y="0"
                        text-anchor="middle"
                        font-size="16"
                        font-family="Times New Roman">Location at time of writing</text>
               </g>
            </svg>
         </div>
      </section>
   </body>
</html>
